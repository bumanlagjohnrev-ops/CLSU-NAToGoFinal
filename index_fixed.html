<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NAToGo - Terminal System</title>
    <style>
        :root {
            /* Primitive Color Tokens */
            --color-white: rgba(255, 255, 255, 1);
            --color-black: rgba(0, 0, 0, 1);
            --color-cream-50: rgba(252, 252, 249, 1);
            --color-cream-100: rgba(255, 255, 253, 1);
            --color-gray-200: rgba(245, 245, 245, 1);
            --color-gray-300: rgba(167, 169, 169, 1);
            --color-gray-400: rgba(119, 124, 124, 1);
            --color-slate-500: rgba(98, 108, 113, 1);
            --color-brown-600: rgba(94, 82, 64, 1);
            --color-charcoal-700: rgba(31, 33, 33, 1);
            --color-charcoal-800: rgba(38, 40, 40, 1);
            --color-slate-900: rgba(19, 52, 59, 1);
            --color-teal-300: rgba(50, 184, 198, 1);
            --color-teal-400: rgba(45, 166, 178, 1);
            --color-teal-500: rgba(33, 128, 141, 1);
            --color-teal-600: rgba(29, 116, 128, 1);
            --color-teal-700: rgba(26, 104, 115, 1);
            --color-teal-800: rgba(41, 150, 161, 1);
            --color-red-400: rgba(255, 84, 89, 1);
            --color-red-500: rgba(192, 21, 47, 1);
            --color-orange-400: rgba(230, 129, 97, 1);
            --color-orange-500: rgba(168, 75, 47, 1);

            /* RGB versions for opacity control */
            --color-brown-600-rgb: 94, 82, 64;
            --color-teal-500-rgb: 33, 128, 141;
            --color-slate-900-rgb: 19, 52, 59;
            --color-slate-500-rgb: 98, 108, 113;
            --color-red-500-rgb: 192, 21, 47;
            --color-red-400-rgb: 255, 84, 89;
            --color-orange-500-rgb: 168, 75, 47;
            --color-orange-400-rgb: 230, 129, 97;

            /* Background color tokens (Light Mode) */
            --color-bg-1: rgba(59, 130, 246, 0.08);
            --color-bg-2: rgba(245, 158, 11, 0.08);
            --color-bg-3: rgba(34, 197, 94, 0.08);
            --color-bg-4: rgba(239, 68, 68, 0.08);
            --color-bg-5: rgba(147, 51, 234, 0.08);
            --color-bg-6: rgba(249, 115, 22, 0.08);
            --color-bg-7: rgba(236, 72, 153, 0.08);
            --color-bg-8: rgba(6, 182, 212, 0.08);

            /* Semantic Color Tokens (Light Mode) */
            --color-background: var(--color-cream-50);
            --color-surface: var(--color-cream-100);
            --color-text: var(--color-slate-900);
            --color-text-secondary: var(--color-slate-500);
            --color-primary: var(--color-teal-500);
            --color-primary-hover: var(--color-teal-600);
            --color-primary-active: var(--color-teal-700);
            --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
            --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
            --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
            --color-border: rgba(var(--color-brown-600-rgb), 0.2);
            --color-btn-primary-text: var(--color-cream-50);
            --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
            --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
            --color-error: var(--color-red-500);
            --color-success: var(--color-teal-500);
            --color-warning: var(--color-orange-500);
            --color-info: var(--color-slate-500);
            --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
            --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

            /* Typography */
            --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --font-size-xs: 11px;
            --font-size-sm: 12px;
            --font-size-base: 14px;
            --font-size-md: 14px;
            --font-size-lg: 16px;
            --font-size-xl: 18px;
            --font-size-2xl: 20px;
            --font-size-3xl: 24px;
            --font-size-4xl: 30px;
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 550;
            --font-weight-bold: 600;
            --line-height-tight: 1.2;
            --line-height-normal: 1.5;
            --letter-spacing-tight: -0.01em;

            /* Spacing */
            --space-4: 4px;
            --space-8: 8px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --space-32: 32px;

            /* Border Radius */
            --radius-sm: 6px;
            --radius-base: 8px;
            --radius-md: 10px;
            --radius-lg: 12px;
            --radius-full: 9999px;

            /* Shadows */
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);

            /* Animation */
            --duration-fast: 150ms;
            --duration-normal: 250ms;
            --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
        }

        /* Dark mode colors */
        @media (prefers-color-scheme: dark) {
            :root {
                --color-gray-400-rgb: 119, 124, 124;
                --color-teal-300-rgb: 50, 184, 198;
                --color-gray-300-rgb: 167, 169, 169;
                --color-gray-200-rgb: 245, 245, 245;
                
                --color-bg-1: rgba(29, 78, 216, 0.15);
                --color-bg-2: rgba(180, 83, 9, 0.15);
                --color-bg-3: rgba(21, 128, 61, 0.15);
                --color-bg-4: rgba(185, 28, 28, 0.15);
                --color-bg-5: rgba(107, 33, 168, 0.15);
                --color-bg-6: rgba(194, 65, 12, 0.15);
                --color-bg-7: rgba(190, 24, 93, 0.15);
                --color-bg-8: rgba(8, 145, 178, 0.15);

                --color-background: var(--color-charcoal-700);
                --color-surface: var(--color-charcoal-800);
                --color-text: var(--color-gray-200);
                --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
                --color-primary: var(--color-teal-300);
                --color-primary-hover: var(--color-teal-400);
                --color-primary-active: var(--color-teal-800);
                --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
                --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
                --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
                --color-border: rgba(var(--color-gray-400-rgb), 0.3);
                --color-error: var(--color-red-400);
                --color-success: var(--color-teal-300);
                --color-warning: var(--color-orange-400);
                --color-info: var(--color-gray-300);
                --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
                --color-btn-primary-text: var(--color-slate-900);
                --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
                --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
                --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);
            }
        }

        /* Base styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family-base);
            font-size: var(--font-size-base);
            line-height: var(--line-height-normal);
            color: var(--color-text);
            background-color: var(--color-background);
            overflow: hidden;
            margin: 0;
            padding: 0;
            height: 100vh;
        }

        .app-container {
            max-width: 414px;
            margin: 0 auto;
            height: 100vh;
            background-color: var(--color-surface);
            position: relative;
            box-shadow: var(--shadow-md);
            overflow: hidden;
        }

        /* Enhanced mobile responsiveness */
        @media (max-width: 414px) {
            .app-container {
                max-width: 100vw;
                margin: 0;
            }
            
            .screen {
                padding: var(--space-16);
            }
            
            .btn {
                min-height: 48px;
                font-size: var(--font-size-lg);
                padding: var(--space-12) var(--space-16);
            }
            
            .form-control, .location-input-field {
                min-height: 48px;
                font-size: var(--font-size-lg);
                padding: var(--space-12);
            }

            .login-title {
                font-size: var(--font-size-2xl);
            }

            .welcome-text {
                font-size: var(--font-size-xl);
            }

            .header-title {
                font-size: var(--font-size-2xl);
            }
        }

        /* Optimize for very small screens */
        @media (max-width: 360px) {
            .screen {
                padding: var(--space-12);
            }

            .location-section {
                padding: var(--space-16);
            }

            .driver-card {
                padding: var(--space-16);
            }
        }

        .screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            padding: var(--space-20);
            overflow-y: auto;
            display: none;
            flex-direction: column;
            background-color: var(--color-surface);
            z-index: 100;
        }

        .screen.active {
            display: flex;
            z-index: 1000;
        }

        /* Splash Screen */
        .splash-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-teal-700) 100%);
            color: var(--color-white);
            text-align: center;
        }

        .logo {
            font-size: var(--font-size-4xl);
            font-weight: var(--font-weight-bold);
            margin-bottom: var(--space-8);
        }

        .tagline {
            font-size: var(--font-size-lg);
            opacity: 0.9;
            margin-bottom: var(--space-32);
        }

        .version-badge {
            background-color: rgba(255, 255, 255, 0.2);
            padding: var(--space-8) var(--space-16);
            border-radius: var(--radius-full);
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
        }

        /* Login Screen */
        .login-screen {
            justify-content: center;
        }

        .login-header {
            text-align: center;
            margin-bottom: var(--space-32);
        }

        .login-title {
            font-size: var(--font-size-3xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-primary);
            margin-bottom: var(--space-8);
        }

        .login-subtitle {
            color: var(--color-text-secondary);
            font-size: var(--font-size-lg);
        }

        .form-group {
            margin-bottom: var(--space-16);
        }

        .form-label {
            display: block;
            margin-bottom: var(--space-8);
            font-weight: var(--font-weight-medium);
            font-size: var(--font-size-sm);
            color: var(--color-text);
        }

        .form-control {
            width: 100%;
            padding: var(--space-16);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            font-size: var(--font-size-base);
            background-color: var(--color-background);
            color: var(--color-text);
            transition: border-color var(--duration-fast) var(--ease-standard);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px var(--color-focus-ring);
        }

        .btn {
            width: 100%;
            padding: var(--space-16);
            border: none;
            border-radius: var(--radius-base);
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-medium);
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease-standard);
        }

        .btn-primary {
            background-color: var(--color-primary);
            color: var(--color-btn-primary-text);
        }

        .btn-primary:hover {
            background-color: var(--color-primary-hover);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .error-message {
            color: var(--color-error);
            font-size: var(--font-size-sm);
            margin-top: var(--space-8);
        }

        /* Map Placeholder */
        .map-container {
            margin-bottom: var(--space-24);
            height: 200px;
            border-radius: var(--radius-lg);
            overflow: hidden;
            border: 1px solid var(--color-card-border);
        }

        .map-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--color-bg-3) 0%, var(--color-bg-1) 100%);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .map-content {
            text-align: center;
            color: var(--color-text-secondary);
        }

        .map-icon {
            width: 40px;
            height: 40px;
            margin-bottom: var(--space-8);
            opacity: 0.7;
        }

        .map-text {
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
            opacity: 0.8;
        }

        .user-location {
            position: absolute;
            top: 60px;
            left: 120px;
            width: 12px;
            height: 12px;
            background-color: var(--color-primary);
            border-radius: 50%;
            border: 2px solid var(--color-white);
            box-shadow: var(--shadow-sm);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(var(--color-teal-500-rgb), 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(var(--color-teal-500-rgb), 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(var(--color-teal-500-rgb), 0);
            }
        }

        /* Main Screen */
        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-32);
            padding-bottom: var(--space-16);
            border-bottom: 1px solid var(--color-border);
        }

        .header-title {
            font-size: var(--font-size-3xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-primary);
        }

        .profile-icon {
            width: 40px;
            height: 40px;
            background-color: var(--color-secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-primary);
            cursor: pointer;
        }

        .main-header {
            text-align: center;
            margin-bottom: var(--space-24);
        }

        .welcome-text {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--space-8);
        }

        .campus-info {
            color: var(--color-text-secondary);
            font-size: var(--font-size-base);
        }

        .location-section {
            background-color: var(--color-background);
            border-radius: var(--radius-lg);
            padding: var(--space-20);
            margin-bottom: var(--space-24);
            border: 1px solid var(--color-card-border);
        }

        .location-input {
            display: flex;
            align-items: center;
            margin-bottom: var(--space-16);
        }

        .location-icon {
            width: 20px;
            height: 20px;
            margin-right: var(--space-12);
            opacity: 0.7;
        }

        .location-input-field {
            flex: 1;
            padding: var(--space-12);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            background-color: var(--color-surface);
            color: var(--color-text);
            font-size: var(--font-size-base);
            min-height: 48px;
        }

        .location-input-field:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px var(--color-focus-ring);
        }

        .suggestions-container {
            position: absolute;
            top: 100%;
            left: 32px;
            right: 0;
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: var(--shadow-md);
        }

        .suggestion-chip {
            padding: var(--space-12) var(--space-16);
            cursor: pointer;
            border-bottom: 1px solid var(--color-border);
            font-size: var(--font-size-base);
            transition: background-color var(--duration-fast) var(--ease-standard);
        }

        .suggestion-chip:hover {
            background-color: var(--color-secondary);
        }

        .suggestion-chip:last-child {
            border-bottom: none;
        }

        .location-input {
            position: relative;
        }

        .fare-info {
            text-align: center;
            padding: var(--space-16);
            background-color: var(--color-bg-3);
            border-radius: var(--radius-base);
            margin-bottom: var(--space-24);
        }

        .fare-amount {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-primary);
        }

        .fare-label {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }

        /* Terminal Matching Screen */
        .matching-screen {
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .matching-animation {
            width: 120px;
            height: 120px;
            border: 4px solid var(--color-secondary);
            border-top: 4px solid var(--color-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: var(--space-32);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .matching-title {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--space-16);
        }

        .matching-status {
            font-size: var(--font-size-base);
            color: var(--color-text-secondary);
            margin-bottom: var(--space-8);
        }

        .terminal-info {
            background-color: var(--color-bg-1);
            padding: var(--space-20);
            border-radius: var(--radius-lg);
            margin: var(--space-24) 0;
            border: 1px solid var(--color-card-border);
        }

        .terminal-name {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--space-8);
        }

        .terminal-status {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }

        /* Driver Assigned Screen */
        .driver-card {
            background-color: var(--color-background);
            border-radius: var(--radius-lg);
            padding: var(--space-24);
            margin-bottom: var(--space-24);
            border: 1px solid var(--color-card-border);
            text-align: center;
        }

        .driver-avatar {
            width: 80px;
            height: 80px;
            background-color: var(--color-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--space-16) auto;
            color: var(--color-white);
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-bold);
        }

        .driver-name {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--space-8);
        }

        .driver-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--space-16);
        }

        .driver-rating {
            display: flex;
            align-items: center;
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }

        .rating-star {
            color: var(--color-warning);
            margin-right: var(--space-4);
        }

        .vehicle-info {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }

        .tracking-status {
            background-color: var(--color-bg-3);
            padding: var(--space-16);
            border-radius: var(--radius-base);
            text-align: center;
            margin-bottom: var(--space-24);
        }

        .tracking-text {
            font-weight: var(--font-weight-medium);
            color: var(--color-success);
        }

        /* Trip Complete Screen */
        .complete-screen {
            align-items: center;
            justify-content: flex-start;
            text-align: center;
            padding-top: var(--space-32);
            overflow-y: auto;
        }

        .complete-icon {
            width: 100px;
            height: 100px;
            background-color: var(--color-success);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--space-32);
            color: var(--color-white);
            font-size: var(--font-size-4xl);
        }

        .complete-title {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--space-16);
        }

        .trip-summary {
            background-color: var(--color-background);
            padding: var(--space-20);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-24);
            border: 1px solid var(--color-card-border);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--space-8);
            font-size: var(--font-size-base);
        }

        .rating-section {
            background-color: var(--color-background);
            padding: var(--space-20);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-24);
            border: 1px solid var(--color-card-border);
        }

        .rating-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-medium);
            margin-bottom: var(--space-16);
            text-align: center;
        }

        .star-rating {
            display: flex;
            justify-content: center;
            gap: var(--space-8);
            margin-bottom: var(--space-16);
        }

        .star {
            font-size: var(--font-size-2xl);
            color: var(--color-border);
            cursor: pointer;
            transition: color var(--duration-fast) var(--ease-standard);
        }

        .star.active {
            color: var(--color-warning);
        }

        .cancel-btn {
            background-color: var(--color-secondary);
            color: var(--color-text);
            margin-top: var(--space-16);
        }

        .cancel-btn:hover {
            background-color: var(--color-secondary-hover);
        }

        /* Utility classes */
        .hidden {
            display: none;
        }

        .text-center {
            text-align: center;
        }

        .mb-16 {
            margin-bottom: var(--space-16);
        }

        .mt-16 {
            margin-top: var(--space-16);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Splash Screen -->
        <div id="splashScreen" class="screen splash-screen active">
            <div class="logo">NAToGo</div>
            <div class="tagline">Your Campus Ride, Anytime</div>
            <div class="version-badge">Terminal System</div>
        </div>

        <!-- Login Screen -->
        <div id="loginScreen" class="screen login-screen">
            <div class="login-header">
                <div class="login-title">Welcome Back</div>
                <div class="login-subtitle">Sign in to continue</div>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label" for="email">CLSU Email</label>
                    <input type="email" id="email" class="form-control" placeholder="your.name@clsu2.edu.ph" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="password">Password</label>
                    <input type="password" id="password" class="form-control" placeholder="Enter your password" required>
                </div>
                
                <button type="submit" class="btn btn-primary">Sign In</button>
                <div id="loginError" class="error-message hidden"></div>
            </form>
        </div>

        <!-- Main Screen -->
        <div id="mainScreen" class="screen">
            <div class="app-header">
                <div class="header-title">NAToGo</div>
                <div class="profile-icon">
                    <svg fill="currentColor" viewBox="0 0 20 20" width="24" height="24">
                        <path d="M10 2C7.24 2 5 4.24 5 7s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 10c-2.33 0-7 1.17-7 3.5V19h14v-1.5c0-2.33-4.67-3.5-7-3.5z"/>
                    </svg>
                </div>
            </div>

            <!-- Map Placeholder -->
            <div class="map-container">
                <div class="map-placeholder">
                    <div class="map-content">
                        <svg class="map-icon" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        </svg>
                        <div class="map-text">CLSU Campus Map</div>
                        <div class="user-location"></div>
                    </div>
                </div>
            </div>

            <div class="location-section">
                <div class="location-input">
                    <svg class="location-icon" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2C6.686 2 4 4.686 4 8c0 5.25 6 10 6 10s6-4.75 6-10c0-3.314-2.686-6-6-6zm0 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/>
                    </svg>
                    <input type="text" id="pickupLocation" class="location-input-field" value="ðŸ“ Current Location" placeholder="Enter pickup location">
                    <div id="pickupSuggestions" class="suggestions-container hidden"></div>
                </div>

                <div class="location-input">
                    <svg class="location-icon" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 18l-6-6h4V2h4v10h4l-6 6z"/>
                    </svg>
                    <input type="text" id="destinationLocation" class="location-input-field" placeholder="Where are you going?">
                    <div id="destinationSuggestions" class="suggestions-container hidden"></div>
                </div>
            </div>

            <div class="fare-info">
                <div class="fare-amount">â‚±20</div>
            </div>

            <button id="bookRideBtn" class="btn btn-primary" disabled>Book Ride</button>
        </div>

        <!-- Terminal Matching Screen -->
        <div id="matchingScreen" class="screen matching-screen">
            <div class="matching-animation"></div>
            <div class="matching-title">Finding Terminal...</div>
            <div id="matchingStatus" class="matching-status">Locating nearest NATO terminal</div>
            
            <div id="terminalInfo" class="terminal-info hidden">
                <div id="terminalName" class="terminal-name"></div>
            </div>

            <button id="cancelMatchingBtn" class="btn cancel-btn">Cancel Request</button>
        </div>

        <!-- Driver Found Screen -->
        <div id="driverScreen" class="screen">
            <div class="main-header">
                <div class="welcome-text">Driver Found!</div>
            </div>

            <div class="driver-card">
                <div id="driverAvatar" class="driver-avatar"></div>
                <div id="driverName" class="driver-name"></div>
                <div class="driver-details">
                    <div class="driver-rating">
                        <span class="rating-star">â˜…</span>
                        <span id="driverRating"></span>
                    </div>
                    <div id="vehicleInfo" class="vehicle-info"></div>
                </div>
            </div>

            <div class="tracking-status">
                <div class="tracking-text">Auto-transitioning to tracking in 3 seconds...</div>
            </div>
        </div>

        <!-- Tracking Screen -->
        <div id="trackingScreen" class="screen">
            <!-- Map Placeholder -->
            <div class="map-container">
                <div class="map-placeholder">
                    <div class="map-content">
                        <svg class="map-icon" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        </svg>
                        <div class="map-text">Tracking your NATO</div>
                        <div class="user-location"></div>
                    </div>
                </div>
            </div>

            <div class="tracking-status">
                <div id="trackingStatusText" class="tracking-text">Your driver is on the way</div>
            </div>

            <div class="driver-card">
                <div id="trackingDriverName" class="driver-name"></div>
                <div class="driver-details">
                    <div class="driver-rating">
                        <span class="rating-star">â˜…</span>
                        <span id="trackingDriverRating"></span>
                    </div>
                    <div id="trackingVehicleInfo" class="vehicle-info"></div>
                </div>
                <div class="fare-info">
                    <div class="fare-label">ETA: 3-5 minutes</div>
                </div>
            </div>

            <button id="callDriverBtn" class="btn cancel-btn">Call Driver</button>
        </div>

        <!-- Trip Complete Screen -->
        <div id="completeScreen" class="screen complete-screen">
            <div class="complete-icon">âœ“</div>
            <div class="complete-title">Trip Completed!</div>
            
            <div class="trip-summary">
                <div class="summary-row">
                    <span>From:</span>
                    <span id="summaryPickup"></span>
                </div>
                <div class="summary-row">
                    <span>To:</span>
                    <span id="summaryDestination"></span>
                </div>
                <div class="summary-row">
                    <span>Driver:</span>
                    <span id="summaryDriver"></span>
                </div>
                <div class="summary-row">
                    <span>Fare:</span>
                    <span>â‚±20.00</span>
                </div>
            </div>

            <div class="rating-section">
                <div class="rating-title">Rate your driver</div>
                <div class="star-rating">
                    <span class="star" data-rating="1">â˜…</span>
                    <span class="star" data-rating="2">â˜…</span>
                    <span class="star" data-rating="3">â˜…</span>
                    <span class="star" data-rating="4">â˜…</span>
                    <span class="star" data-rating="5">â˜…</span>
                </div>
            </div>

            <button id="bookAnotherBtn" class="btn btn-primary">Book Another Ride</button>
        </div>
    </div>

    <script>
    // App Data
    const appData = {
        natoTerminals: [
            { id: "Terminal-1", name: "Terminal 1" },
            { id: "Terminal-2", name: "Terminal 2" },
            { id: "Terminal-3", name: "Terminal 3" },
            { id: "Terminal-4", name: "Terminal 4" },
            { id: "Terminal-5", name: "Terminal 5" }
        ],
        campusLocations: [
            "Main Gate", "2nd Gate", "Third Gate", "College of Agriculture", "College of Arts and Social Sciences",
            "College of Business and Accountancy", "College of Education", "College of Engineering",
            "College of Fisheries", "College of Home Science and Industry", "College of Science",
            "College of Veterinary Science and Medicine", "University Library", "University Infirmary",
            "Student Dormitories", "Ladies Dorm 3", "Ladies Dorm 4", "Ladies Dorm 5", "IGS Dorm",
            "Three-Storey Dorm", "Guest House", "RSTC Hostel", "RET Farmers Training Hostel",
            "CLSU Gymnatorium", "Umali Gym", "Multi-purpose Gym", "Tennis Court", "CLSU Oval",
            "CLSU Lagoon", "Lingap Kalikasan Nature Park", "Botanical Garden", "Rizal Park",
            "Centennial Ground", "CLSU Baywatch", "Vivencio Saulong Park", "Visionary Leadership Gate",
            "American Superintendent Park", "Chinese Temple", "University Canteen", "Alumni Canteen",
            "Community Market", "Food Park", "University Post Office", "Main Administrative Building",
            "Office of Student Affairs", "Office of Admissions", "Office of the University President",
            "Physical Plant and Site Development Services", "Administrative Services Office",
            "Small Ruminants Center", "PhilSCAT", "CREaTe Center", "Biotechnology Research Center"
        ],
        natoDrivers: [
            { name: "Kuya Mario Santos", rating: 4.8, vehicle: "Tricycle 12", trips: 847 },
            { name: "Manong Jun Reyes", rating: 4.9, vehicle: "Tricycle 07", trips: 1205 },
            { name: "Kuya Ben Cruz", rating: 4.7, vehicle: "Tricycle 23", trips: 623 },
            { name: "Tatay Rico Lopez", rating: 4.6, vehicle: "Tricycle 15", trips: 934 }
        ],
        currentTrip: { pickup: '', destination: '', assignedTerminal: null, assignedDriver: null, currentTerminalIndex: 0 }
    };

    let currentUser = null;
    let terminalTimeout = null;
    let selectedRating = 0;

    function getRandomTerminals() {
        const shuffled = [...appData.natoTerminals];
        for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
    }

    function showScreen(screenId) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(screenId).classList.add('active');
    }

    function showError(id, msg) {
        const el = document.getElementById(id);
        el.textContent = msg;
        el.classList.remove('hidden');
    }

    function hideError(id) {
        document.getElementById(id).classList.add('hidden');
    }

    function initializeApp() {
        setTimeout(() => showScreen('loginScreen'), 3000);
        document.getElementById('loginForm').addEventListener('submit', handleLogin);
        setupLocationInputs();
        document.getElementById('bookRideBtn').addEventListener('click', handleBookRide);
        document.getElementById('cancelMatchingBtn').addEventListener('click', handleCancelMatching);
        document.getElementById('callDriverBtn').addEventListener('click', handleCallDriver);
        document.getElementById('bookAnotherBtn').addEventListener('click', handleBookAnother);
        document.querySelectorAll('.star').forEach(s => s.addEventListener('click', handleStarRating));
    }

    function handleLogin(e) {
        e.preventDefault();
        hideError('loginError');
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value.trim();
        if (!email.endsWith('@clsu2.edu.ph')) return showError('loginError', 'Use a valid CLSU email (@clsu2.edu.ph)');
        if (password.length < 4) return showError('loginError', 'Password must be at least 4 characters');
        currentUser = { email, name: email.split('@')[0].replace('.', ' ') };
        showScreen('mainScreen');
    }

    function setupLocationInputs() {
        const pickupInput = document.getElementById('pickupLocation');
        const destinationInput = document.getElementById('destinationLocation');
        const pickupSuggestions = document.getElementById('pickupSuggestions');
        const destinationSuggestions = document.getElementById('destinationSuggestions');

        pickupInput.addEventListener('input', e => { showSuggestions(e.target.value, pickupSuggestions, pickupInput); validateBookingForm(); });
        destinationInput.addEventListener('input', e => { showSuggestions(e.target.value, destinationSuggestions, destinationInput); validateBookingForm(); });

        document.addEventListener('click', e => {
            if (!e.target.closest('.location-input')) {
                pickupSuggestions.classList.add('hidden');
                destinationSuggestions.classList.add('hidden');
            }
        });
    }

    function showSuggestions(query, container, inputField) {
        if (!query || query.length < 2 || query === 'ðŸ“ Current Location') {
            container.classList.add('hidden'); return;
        }
        const matches = appData.campusLocations.filter(l => l.toLowerCase().includes(query.toLowerCase()));
        if (matches.length === 0) return container.classList.add('hidden');
        container.innerHTML = matches.slice(0, 5)
            .map(loc => `<div class="suggestion-chip" onclick="selectSuggestion('${loc}','${inputField.id}')">${loc}</div>`)
            .join('');
        container.classList.remove('hidden');
    }

    function selectSuggestion(location, id) {
        document.getElementById(id).value = location;
        const containerId = id === 'pickupLocation' ? 'pickupSuggestions' : 'destinationSuggestions';
        document.getElementById(containerId).classList.add('hidden');
        validateBookingForm();
    }

    function validateBookingForm() {
        const pickup = document.getElementById('pickupLocation').value.trim();
        const dest = document.getElementById('destinationLocation').value.trim();
        document.getElementById('bookRideBtn').disabled = !(pickup && dest && pickup !== dest);
    }

    function handleBookRide() {
        appData.currentTrip.pickup = document.getElementById('pickupLocation').value;
        appData.currentTrip.destination = document.getElementById('destinationLocation').value;
        appData.currentTrip.currentTerminalIndex = 0;
        showScreen('matchingScreen');
        startTerminalMatching();
    }

    function startTerminalMatching() {
        const randomTerminals = getRandomTerminals();
        document.getElementById('matchingStatus').textContent = 'Finding nearest terminal...';
        document.getElementById('terminalInfo').classList.add('hidden');
        setTimeout(() => tryNextTerminal(randomTerminals), 2000);
    }

    function tryNextTerminal(terminals) {
        if (appData.currentTrip.currentTerminalIndex >= terminals.length) {
            document.getElementById('matchingStatus').textContent = 'No available drivers at the moment';
            setTimeout(() => showScreen('mainScreen'), 3000);
            return;
        }
        const terminal = terminals[appData.currentTrip.currentTerminalIndex];
        appData.currentTrip.assignedTerminal = terminal;
        document.getElementById('matchingStatus').textContent = `Request assigned to ${terminal.name}`;
        document.getElementById('terminalName').textContent = `Assigned to ${terminal.name}`;
        document.getElementById('terminalInfo').classList.remove('hidden');
        terminalTimeout = setTimeout(() => acceptRideRequest(terminal), 2000);
    }

    function acceptRideRequest(terminal) {
        clearTimeout(terminalTimeout);
        const driver = appData.natoDrivers[Math.floor(Math.random() * appData.natoDrivers.length)];
        appData.currentTrip.assignedDriver = driver;
        document.getElementById('matchingStatus').textContent = `${terminal.name} accepted! Finding driver...`;
        setTimeout(() => {
            document.getElementById('matchingStatus').textContent = 'Driver found! Getting details...';
            setTimeout(() => showDriverAssigned(driver), 2000);
        }, 2000);
    }

    function showDriverAssigned(driver) {
        document.getElementById('driverAvatar').textContent = driver.name.charAt(0);
        document.getElementById('driverName').textContent = driver.name;
        document.getElementById('driverRating').textContent = driver.rating;
        document.getElementById('vehicleInfo').textContent = driver.vehicle;
        showScreen('driverScreen');
        setTimeout(() => handleContinueToTracking(), 3000);
    }

    function handleContinueToTracking() {
        document.getElementById('trackingDriverName').textContent = appData.currentTrip.assignedDriver.name;
        document.getElementById('trackingDriverRating').textContent = appData.currentTrip.assignedDriver.rating;
        document.getElementById('trackingVehicleInfo').textContent = appData.currentTrip.assignedDriver.vehicle;
        showScreen('trackingScreen');
        setTimeout(() => handleCompleteRide(), 8000);
    }

    function handleCancelMatching() {
        clearTimeout(terminalTimeout);
        showScreen('mainScreen');
    }

    function handleCompleteRide() {
        document.getElementById('summaryPickup').textContent = appData.currentTrip.pickup;
        document.getElementById('summaryDestination').textContent = appData.currentTrip.destination;
        document.getElementById('summaryDriver').textContent = appData.currentTrip.assignedDriver.name;
        showScreen('completeScreen');
    }

    function handleStarRating(e) {
        selectedRating = +e.target.dataset.rating;
        document.querySelectorAll('.star').forEach((s, i) => s.classList.toggle('active', i < selectedRating));
    }

    function handleCallDriver() {
        alert(`Calling ${appData.currentTrip.assignedDriver.name}...`);
    }

    function handleBookAnother() {
        document.getElementById('pickupLocation').value = 'ðŸ“ Current Location';
        document.getElementById('destinationLocation').value = '';
        document.getElementById('bookRideBtn').disabled = true;
        document.getElementById('pickupSuggestions').classList.add('hidden');
        document.getElementById('destinationSuggestions').classList.add('hidden');
        appData.currentTrip = { pickup: '', destination: '', assignedTerminal: null, assignedDriver: null, currentTerminalIndex: 0 };
        document.querySelectorAll('.star').forEach(s => s.classList.remove('active'));
        showScreen('mainScreen');
    }

    document.addEventListener('DOMContentLoaded', initializeApp);
</script>
</body>
</html>